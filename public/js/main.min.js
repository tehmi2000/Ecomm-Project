let currencyLocale="USD",loggedInUserData=null,exchangeRates=null,randWorker=void 0;const openMenu=function(){document.querySelector("#sidemenu").style.marginLeft="0%"},closeMenu=function(){document.querySelector("#sidemenu").style.marginLeft="-150%"},addToggleAction=function(evt){console.log("on"),evt.currentTarget.classList.toggle("on")},createSuggestions=function(pEl,cEl){const createSugItem=function(props){let span0=createComponent("SPAN",null,["rows","sug-item"]),img0=create("IMG"),span01=createComponent("SPAN",null,["item-name"]);img0.setAttribute("src",props["item-image"][0]),img0.setAttribute("alt",""),span0.addEventListener("click",(function(evt){window.location.href=`/categories/view?query=${window.encodeURIComponent(props.categories[0]||props["item-name"])}`})),span01.innerHTML=props["item-name"],span0=joinComponent(span0,img0,span01),cEl.appendChild(span0)};pEl.style.display="flex",fetch("/api/goods/all/mostPopular").then(async response=>{try{let result=await response.json(),data=dataValidation(result).data;const sugData=[];data.forEach((eachItem,index)=>{if(0===index)sugData.push(eachItem);else{let isUnique=!sugData.some(item=>item.categories[0]===eachItem.categories[0]||item["item-name"]===eachItem["item-name"]);sugData.length<4&&(!0===isUnique&&""!==eachItem["item-image"][0]||index>=data.length-4)&&sugData.push(eachItem)}}),sugData.forEach(item=>{createSugItem(item)}),document.querySelectorAll(".sug-item .item-name").forEach(el=>{$clamp(el,{clamp:2})})}catch(error){console.error(error)}}).catch(error=>{console.error(error)})},generateRandomColor=function(){let red=225*Math.random()+1,blue=225*Math.random()+1,green,color;return`rgb(${red}, ${225*Math.random()+1}, ${blue})`},fetchAndCacheData=async(apiUrl,successCallback,errorCallback,options)=>{errorCallback=errorCallback||function(error){console.error(error)},options=options||{cacheName:"univers-cache-v2"};const fetchAndStoreData=async function(storedResponse){let response=null===(storedResponse=storedResponse||null)?await fetch(apiUrl):storedResponse,clonedResponse=response.clone(),result=await response.json();return successCallback(result),clonedResponse};try{if("caches"in window)caches.open(options.cacheName).then(cache=>{cache.match(apiUrl).then(async cacheResult=>{if(null==cacheResult){let res=await fetchAndStoreData();return cache.put(apiUrl,res)}{let result=await cacheResult.json();successCallback(result)}}).catch(error=>{errorCallback(error)})}).catch(error=>{errorCallback(error)});else{let response=await fetch(apiUrl),result=await response.json();successCallback(result)}}catch(error){errorCallback(error)}};function formatTime(hours,minutes){const ampm=hours>=12?"PM":"AM",fhours=hours>12?hours-12:hours,fmin=1===JSON.stringify(minutes).length?`0${minutes}`:minutes,ftime=`${fhours}:${fmin} ${ampm}`;return ftime}function getCookie(name){arrayCookie=document.cookie.split(";");for(let index=0;index<arrayCookie.length;index++)if(-1!=arrayCookie[index].indexOf(name))return{name:decodeURI(arrayCookie[index].split("=")[0]),value:decodeURI(arrayCookie[index].split("=")[1])}}const preFormatInput=function(content){for(content=`<pre>${content}</pre>`;content.search("\n")>0;)content=content.replace("\n","<br/>");let formattedContent="",startBold=!1,endBold=!1,startItalic=!1,endItalic=!1,startLink={state:!1,position:null},endLink={state:!1,position:null};for(let index=0;index<content.length;index++)if("*"===content.charAt(index)&&(!1===startBold?(startBold=!0,content=`${content.substr(0,index)}<b>${content.substr(index+1)}`):(endBold=!0,startBold=!1,content=`${content.substr(0,index)}</b>${content.substr(index+1)}`)),"_"===content.charAt(index)&&(!1===startItalic?(startItalic=!0,content=content.substr(0,index)+"<i>"+content.substr(index+1)):(endItalic=!0,content=content.substr(0,index)+"</i>"+content.substr(index+1),endItalic=!1,startItalic=!1)),"~"===content.charAt(index))try{!1===startLink.state?(startLink.state=!0,startLink.position=index):(endLink.state=!0,endLink.position=index,content=content.substr(0,startLink.position)+'<a href="https://'+content.substr(startLink.position+1,endLink.position-startLink.position-1)+'">'+content.substr(startLink.position+1,endLink.position-startLink.position-1)+"</a>"+content.substr(index+1),startLink.position=null,endLink.state=!1,startLink.state=!1)}catch(e){console.error(e)}return formattedContent=content.replace("<pre>","").replace("</pre>",""),formattedContent};function formatName(str){let formattedString;return str.charAt(0).toUpperCase()+str.substring(1).toLowerCase()}function genHex(length){length=length||16;let counter=0,generated_hex="t",characters="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";for(;counter<=length;){let rand_index=Math.round(Math.random()*characters.length+1);generated_hex+=characters.charAt(rand_index),counter+=1}return generated_hex}const getQuery=function(){const object={},queryList=window.location.search.substring(1).split("&");for(let index=0;index<queryList.length;index++)object[queryList[index].split("=")[0]]=queryList[index].split("=")[1];return object};function get(selector){return document.getElementById(selector)}function forEach(elements,reaction){for(let i=0;i<elements.length;i++)reaction(elements[i])}const validateSearch=function(){return""!==document.getElementById("searchField").value&&document.getElementById("searchField").value.length>=3},dataValidation=data=>{const result={valid:!1,data:null};if(data.length>0){let[dataOne]=data}return result.valid=!0,result.data=data,result};function create(element){return document.createElement(element)}function createText(text){return document.createTextNode(text)}function createComponent(type,value,classList){value=value||null,classList=classList||null;const component=document.createElement(type);return value&&(text=document.createTextNode(value),component.appendChild(text)),classList&&classList.forEach(className=>{component.classList.add(className)}),component}function joinComponent(container,...components){for(let component of components)container.appendChild(component);return container}function log(output){return console.log(output)}const displayResponse=function(response,options){options=options||{type:"success"},console.log(response,options);const component=document.querySelector("#response");options.type&&(component.style.backgroundColor="error"===options.type?"#e72e2e":"green"),component.innerHTML=response,component.style.top=0,setTimeout((function(){component.style.opacity=0,component.style.top="-10rem",setTimeout((function(){component.style.opacity=1}),600)}),3e3)},formatAsMoney=(price,destinationCurrency)=>{let formattedPrice;return(price=convertCurrencies(price,destinationCurrency=destinationCurrency||"USD")).toLocaleString(void 0,{style:"currency",currency:currencyLocale})},convertCurrencies=function(price,destinationCurrency){let rate=1;if(null!==exchangeRates){let tempRates=exchangeRates;delete tempRates.id,delete tempRates.lastModified,Object.keys(tempRates).forEach(nameOfCurrency=>{let seperatedCurrency;nameOfCurrency.substr(3)===destinationCurrency.toUpperCase()&&(rate=exchangeRates[`${nameOfCurrency}`])})}return price*rate};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/workers/univers-sw.js").then((function(reg){console.log("Service worker is working fine")})).catch((function(err){console.log(err.message),console.log("Service worker could not intall")}))});let currencySuccessCallback=result=>{"ratesdata"===result.id&&(exchangeRates=result)},exchangeRateApiUrl="/api/currency/get-exchange-rate";fetchAndCacheData(exchangeRateApiUrl,currencySuccessCallback),document.addEventListener("DOMContentLoaded",(function(){try{if(getCookie("univers-username")){let apiUrl=`/api/user/${getCookie("univers-username").value}`,sideMenu=document.querySelector("#sidemenu"),userIcon=document.querySelector("#user-icon"),userdataSuccessCallback=function(userData){if(loggedInUserData=""===userData.email||null===userData.email?null:userData,sideMenu&&userData.profile_picture){let div0=create("DIV"),child="<a href='/myprofile'><img id='user-photo' src='../assets/images/contacts-filled.png' alt='' class='user-picture'></a><a href='/logout' class='link-btn'>Logout</a>";div0.innerHTML=child,document.querySelector("#sidemenu nav div:first-child").replaceWith(div0),""!==userData.profile_picture&&(document.querySelector("#sidemenu #user-photo").src=userData.profile_picture),document.querySelector("#sidemenu #controls").style.display="flex"}if(userIcon&&null!==userData&&userData.firstname){let abbrName=`${formatName(userData.firstname.substr(0,5))}${userData.firstname.length>5?"...":""}`;userIcon.classList.toggle("active-user",!0),userIcon.classList.toggle("icofont-user-alt-7",!1),userIcon.innerHTML=`<span>${abbrName}</span>`,userIcon.title=`Logged in as ${formatName(userData.firstname)} ${formatName(userData.lastname)}`}};fetch(apiUrl).then(async response=>{try{let result=await response.json();userdataSuccessCallback(result)}catch(error){console.error(error)}}).catch(error=>{console.error(error)})}let delay=null;const dropMenu=document.querySelector(".drop-container");dropMenu&&(dropMenu.addEventListener("mouseover",(function(evt){delay&&clearTimeout(delay),document.querySelector(".drop-container .drop-content").style.display="grid"})),dropMenu.addEventListener("mouseout",(function(evt){delay=setTimeout((function(){document.querySelector(".drop-container .drop-content").style.display="none"}),1e3)})))}catch(e){alert(e)}}));