let paymentPortalLoaded=!1,flagCountry=!1,registrationUrl="";const createOption=function(container,displayText,value){let option=createComponent("OPTION",displayText);option.setAttribute("value",value),container.appendChild(option)},removeOption=function(option){option.parentNode.removeChild(option)},getCountries=function(evt){!1===flagCountry&&fetch("/api/countries/all").then((async function(response){try{let country_list=await response.json();forEach(country_list,(function(element){createOption(document.querySelector("[name='user-country']"),element.name,element.name)})),flagCountry=!0}catch(err){console.error(err)}})).catch((function(error){console.error(error)}))},getRegion=function(evt){fetch(`/api/countries/all/${evt.currentTarget.value}/getRegions`).then((async function(response){try{let regionList=await response.json();forEach(document.querySelectorAll("[name='user-region'] > option:not(:first-child)"),(function(element){removeOption(element)})),regionList.length>0&&forEach(regionList,(function(element){createOption(document.querySelector("[name='user-region']"),element.name,element.name)}))}catch(err){console.error(err)}})).catch((function(error){console.error(error)}))},addHandlers=function(){const form=document.querySelector("#vendor-form"),container=document.querySelector("#vendor-form .container"),navOne=document.querySelector(".form-navigation span:nth-child(1)"),navTwo=document.querySelector(".form-navigation span:nth-child(2)"),navThree=document.querySelector(".form-navigation span:nth-child(3)"),nextBtnOne=document.querySelector("#vendor-form .step:first-child .btn"),nextBtnTwo=document.querySelector("#vendor-form .step:nth-child(2) .btn"),setActive=function(elementNumber){document.querySelectorAll(".form-navigation span.on").forEach(element=>{element.classList.remove("on")});for(let i=1;i<=elementNumber;i++)document.querySelector(".form-navigation .progress").style.width=`${50*(i-1)}%`,document.querySelector(`.form-navigation span:nth-child(${i})`).classList.add("on"),document.querySelector(`.form-navigation span:nth-child(${i})`).removeAttribute("disabled")},stepValidation=function(elements){const logicArray=[];elements.forEach(el=>{let isEmpty=""!==el.value;el.style.boxShadow=isEmpty?"none":"0 0 4px red",logicArray.push(isEmpty)});const isValid=logicArray.reduce((current,next)=>current&&next);return isValid},stepOne=function(evt){null===evt.currentTarget.getAttribute("disabled")&&(setActive(1),container.style.marginLeft="0%")},stepTwo=function(evt){const inputElements=document.querySelectorAll("#vendor-form .container .step:nth-child(1) *:required");null===evt.currentTarget.getAttribute("disabled")&&!0===stepValidation(inputElements)&&(setActive(2),container.style.marginLeft="-100%")},stepThree=function(evt){const inputElements=document.querySelectorAll("#vendor-form .container .step:nth-child(2) *:required");if(null===evt.currentTarget.getAttribute("disabled")&&!0===stepValidation(inputElements)){setActive(3),container.style.marginLeft="-200%";const emailValue=document.querySelector("[name='user-email']").value;!1===paymentPortalLoaded&&setTimeout(()=>{loadPortal(emailValue)},4998)}};navOne.addEventListener("click",stepOne),navTwo.addEventListener("click",stepTwo),nextBtnOne.addEventListener("click",stepTwo),navThree.addEventListener("click",stepThree),nextBtnTwo.addEventListener("click",stepThree),form.addEventListener("submit",formHandler),document.querySelector("[name='user-country']").addEventListener("click",getCountries),document.querySelector("[name='user-country']").addEventListener("change",getRegion)};document.addEventListener("DOMContentLoaded",(function(){addHandlers()}));const submitForm=function(formName){document[`${formName}`].submit()},formHandler=evt=>{evt.preventDefault();const bodyValue=function(){const retValue={},arrayOfElements=document.querySelectorAll("#vendor-form [name]");return arrayOfElements.forEach(element=>{retValue[`${element.name}`]=element.value}),retValue}();fetch(registrationUrl,{method:"POST",body:JSON.stringify(bodyValue),headers:{"Content-Type":"application/json; charset=utf-8"}}).then((async function(response){try{let result=await response.json(),[data]=result;"ok"===data.status&&(window.location.href=`http://localhost:5000/myprofile/orders?sectid=3&idn=success&generated_uuid=${data.sellerID}`)}catch(error){console.error(error)}})).catch((function(error){console.error(error)}))};